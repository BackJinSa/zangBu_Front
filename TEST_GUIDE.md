# 지도 기능 테스트 가이드 🧪

## 테스트 환경 설정

### 1. 개발 서버 실행
```bash
npm run dev
```

### 2. 환경변수 설정 (.env 파일)
```bash
# 카카오 맵 API 키 (실제 지도 표시용)
VITE_KAKAO_MAP_API_KEY=your_api_key_here

# Mock API 사용 (백엔드 없이 테스트)
VITE_USE_MOCK_API=true
```

## 테스트 방법

### 🎯 1. 기본 UI 테스트
**접속**: `http://localhost:5173/map`

**확인사항**:
- ✅ 상단 검색바 표시
- ✅ 좌측 필터 사이드바 표시  
- ✅ 우측 지도 영역 표시
- ✅ 반응형 디자인 (모바일에서 레이아웃 변경)

### 🎯 2. API 연동 테스트
**접속**: `http://localhost:5173/map/test`

**테스트 시나리오**:
1. **"API 테스트 실행"** 버튼 클릭
2. 개발자 도구 콘솔 확인
3. 네트워크 탭에서 API 호출 확인
4. 응답 데이터 JSON 형식 확인

**예상 결과**:
```json
[
  {
    "address": "서울특별시 강남구 테헤란로 123",
    "lat": "37.4988799",
    "lng": "127.031132",
    "building_name": "삼성빌딩"
  }
]
```

### 🎯 3. 필터 기능 테스트
**위치**: `/map/test` 페이지

**테스트 순서**:
1. 먼저 "API 테스트 실행" 클릭하여 데이터 로드
2. "아파트" 체크박스 선택
3. 필터된 결과 확인 (아파트가 포함된 건물만)
4. "오피스텔" 체크박스 추가 선택
5. 결과 업데이트 확인

### 🎯 4. 검색 기능 테스트
**위치**: `/map/test` 페이지

**테스트 순서**:
1. 검색 입력창에 "삼성" 입력
2. 실시간 검색 결과 확인
3. "서울" 입력하여 지역 검색 테스트
4. 결과 없음 상태 확인

### 🎯 5. 실제 지도 테스트 (카카오 맵 API 필요)
**접속**: `http://localhost:5173/map`

**설정**:
1. `.env` 파일에 카카오 맵 API 키 설정
2. `VITE_USE_MOCK_API=false` 설정

**테스트 순서**:
1. 페이지 로드 시 지도 표시 확인
2. 마커 표시 확인
3. 마커 클릭하여 인포윈도우 확인
4. 필터 변경 시 마커 업데이트 확인

## 테스트 시나리오별 확인사항

### ✅ Mock API 테스트
- 콘솔에 "🔧 Mock API 사용 중..." 메시지
- 0.8초 지연 후 응답
- 서울/부산 지역에 맞는 좌표 생성

### ✅ 실제 API 테스트  
- 콘솔에 "🌐 실제 API 호출 중..." 메시지
- 백엔드 서버 응답
- 실제 좌표 데이터

### ✅ 에러 처리 테스트
1. 백엔드 서버 중단 상태에서 테스트
2. 자동으로 Mock 데이터로 대체 확인
3. 콘솔에 "⚠️ API 실패로 Mock 데이터 사용" 메시지

## 주요 확인 포인트

### 🔍 네트워크 탭 확인
```
Request URL: https://api.zanbu.site/map/list
Request Method: POST
Request Headers:
  Authorization: Bearer [token]
  Content-Type: application/json

Request Body:
[
  {
    "address": "서울특별시 강남구 테헤란로 123",
    "building_name": "삼성빌딩"
  }
]
```

### 🔍 콘솔 로그 확인
```
🌐 실제 API 호출 중...
API 요청 데이터: [...]
API 응답: [...]
```

### 🔍 상태 관리 확인
- Pinia 스토어 상태 변화
- 필터 상태 유지
- 로딩 상태 표시

## 트러블슈팅

### ❌ 지도가 표시되지 않는 경우
- 카카오 맵 API 키 확인
- 도메인 등록 상태 확인
- 브라우저 콘솔 에러 확인

### ❌ API 호출 실패 시
- 백엔드 서버 상태 확인
- CORS 설정 확인
- 네트워크 연결 확인
- Mock API로 대체 테스트

### ❌ 필터가 작동하지 않는 경우
- Vue DevTools로 상태 확인
- 콘솔 에러 확인
- 이벤트 바인딩 확인

## 성능 테스트

### 📊 로딩 속도
- API 응답 시간 측정
- 지도 렌더링 시간 확인
- 마커 표시 성능 확인

### 📊 메모리 사용량
- 개발자 도구 Performance 탭 사용
- 메모리 누수 확인
- 마커 정리 확인

## 다음 단계

1. **실제 백엔드 연동**: Mock을 실제 API로 교체
2. **카카오 맵 API 키 발급**: 실제 지도 표시
3. **추가 기능 테스트**: 클러스터링, 상세 정보 등
4. **사용자 테스트**: 실제 사용자 시나리오 테스트

---

## 빠른 테스트 체크리스트

- [ ] 개발 서버 실행 (`npm run dev`)
- [ ] `/map/test` 페이지 접속
- [ ] API 테스트 버튼 클릭
- [ ] 결과 데이터 확인
- [ ] 필터 기능 테스트
- [ ] 검색 기능 테스트
- [ ] `/map` 페이지에서 UI 확인
- [ ] 브라우저 콘솔 에러 없음 확인
- [ ] 네트워크 탭에서 API 호출 확인

모든 테스트가 통과하면 지도 기능이 정상적으로 구현된 것입니다! 🎉